# מדריך מהיר לתיקון הבעיות 🔧

## ✅ בעיה 1: סיסמת מנהל לא עובדת

### פתרון:

**שלב 1:** הרץ את הסקריפט ליצירת admin:

```bash
cd server
node scripts/createAdmin.js
```

**שלב 2:** אם זה לא עובד, נסה עם סיסמה מותאמת:

```bash
ADMIN_PASSWORD=הסיסמה_שלך node scripts/createAdmin.js
```

**שלב 3:** בדוק שהסיסמה הנכונה:
- **ברירת מחדל:** `1234!1234`
- **או:** הסיסמה שיצרת ב-`ADMIN_PASSWORD`

**שלב 4:** אם עדיין לא עובד:
1. פתח Supabase Dashboard → Table Editor
2. בדוק שיש טבלה `admins` עם שורה אחת
3. בדוק שיש `passwordhash` ו-`role: admin`

**שלב 5:** Fallback דרך .env:
1. הרץ: `node server/hash.js`
2. העתק את ה-hash
3. הוסף ל-`server/.env`:
   ```env
   ADMIN_HASH=הדבק_כאן_את_ה_hash
   ```

---

## ✅ בעיה 2: סרטונים לא נפתחים

### פתרון:

**אם הסרטון לא נטען:**

1. **פתח קונסול של הדפדפן** (לחץ F12)
2. עבור ל-**Console** או **Network**
3. נסה לפתוח סרטון
4. בדוק אם יש שגיאה

**אם יש שגיאה "CORS" או "Network":**
- זה אומר שה-Signed URL לא נוצר נכון
- בדוק בקונסול של השרת אם יש שגיאה

**אם יש שגיאה "403" או "Forbidden":**
- בדוק ש-`SUPABASE_SERVICE_ROLE_KEY` נכון ב-`.env`
- או שה-`SUPABASE_KEY` נכון

**אם הסרטון לא מתחיל:**
- בדוק שהפורמט נתמך: MP4, MOV, AVI
- נסה סרטון אחר

**אם זה עדיין לא עובד:**
1. בדוק שה-Bucket `vaad-pickters` קיים ב-Supabase
2. בדוק שה-folder `videos` קיים
3. בדוק שהשרת רץ (`npm run dev`)

---

## ✅ בעיה 3: הרשמה לניוזלטר לא עובדת

### פתרון:

**שלב 1:** בדוק שהטופס מלא נכון:
- ✅ שם פרטי
- ✅ מייל תקין (למשל: name@example.com)

**שלב 2:** פתח קונסול של הדפדפן (F12):
- אם יש שגיאת **Network** → השרת לא רץ או לא נגיש
- אם יש שגיאה **400/500** → יש בעיה בשרת

**שלב 3:** בדוק בקונסול של השרת:
- אם יש שגיאה ב-Supabase → בדוק את ה-Connection String
- אם יש שגיאה "table users does not exist" → צור את הטבלה (ראה למטה)

**שלב 4:** ודא שטבלת `users` קיימת ב-Supabase:

```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  fname TEXT NOT NULL,
  Email TEXT NOT NULL UNIQUE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**שלב 5:** נסה להריץ מחדש את השרת:

```bash
# עצור את השרת (Ctrl+C)
npm run dev
```

---

## 📋 סיכום - מה לעשות עכשיו:

### 1. תיקון סיסמת מנהל:
```bash
cd server
node scripts/createAdmin.js
```

### 2. בדיקת סרטונים:
- פתח את האתר
- עבור ל-"גלריה" → טאב "וידאו"
- אם אין סרטונים - העלה אחד כמנהל
- אם יש סרטונים אבל לא נפתחים - פתח קונסול (F12) ובדוק שגיאות

### 3. בדיקת הרשמה לניוזלטר:
- גלול למטה בעמוד הראשי
- מלא את הטופס (שם ומייל)
- לחץ "שלח"
- אם יש שגיאה - פתח קונסול (F12) ובדוק

---

## 🚀 הוספת תמונות וסרטונים (מדריך מהיר):

### דרך האתר:
1. **התחבר כמנהל** (סיסמה: `1234!1234`)
2. עבור ל-**"גלריה"**
3. בחר טאב **"תמונות"** או **"וידאו"**
4. לחץ **"העלה תמונה/סרטון"** (מופיע רק למנהל)
5. בחר קובץ מהמחשב
6. בחר **קטגוריה**
7. לחץ **"העלה"**

### דרך Supabase:
1. היכנס ל-Supabase Dashboard → Storage
2. בחר bucket `vaad-pickters`
3. פתח folder `images` או `videos`
4. לחץ "Upload file"
5. בחר קובץ והעלה

**⚠️ חשוב:** שם הקובץ צריך להיות בפורמט:
```
קטגוריה_timestamp_שם_קובץ.jpg
```

דוגמה: `hanukkah_1234567890_event1.jpg`

---

## 🔍 איך לבדוק שהכל עובד:

1. **בדוק שהשרת רץ:**
   ```bash
   npm run dev
   ```
   צריך לראות:
   ```
   Server listening on port 3001
   Auth routes connected at /api/auth
   User routes connected at /api/users
   Media routes connected at /api/media
   Email routes connected at /api/email
   ```

2. **בדוק שהלקוח רץ:**
   - פתח `http://localhost:3000`
   - צריך לראות את האתר

3. **בדוק כניסת מנהל:**
   - לחץ "כניסת מנהל"
   - הכנס סיסמה: `1234!1234`
   - צריך להתחבר בהצלחה

4. **בדוק הרשמה לניוזלטר:**
   - מלא את הטופס
   - לחץ "שלח"
   - צריך לראות "נרשמת בהצלחה"

---

## 📞 אם עדיין יש בעיות:

1. **פתח קונסול של השרת** - בדוק אם יש שגיאות
2. **פתח קונסול של הדפדפן** (F12) - בדוק אם יש שגיאות
3. **בדוק את .env** - ודא שכל המשתנים נכונים
4. **בדוק Supabase Dashboard** - ודא שהטבלאות וה-Buckets קיימים

**הצלחה! 🎉**
